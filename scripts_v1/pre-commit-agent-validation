#!/bin/bash
#
# pre-commit hook for agent consistency validation
# Validates that all agent references in commands exist in personal agents
#
# Installation:
#   cp ~/.claude/scripts/pre-commit-agent-validation .git/hooks/pre-commit
#   chmod +x .git/hooks/pre-commit
#

# Run the validation script
if [ -f "$HOME/.claude/scripts/validate-agent-consistency.sh" ]; then
  bash "$HOME/.claude/scripts/validate-agent-consistency.sh"
  exit_code=$?

  if [ $exit_code -ne 0 ]; then
    echo ""
    echo "❌ Commit blocked: Agent validation failed"
    echo "   Please fix the invalid agent references before committing"
    echo ""
    exit 1
  fi
else
  echo "⚠️  Warning: Agent validation script not found"
  echo "   Expected: $HOME/.claude/scripts/validate-agent-consistency.sh"
  exit 0
fi

exit 0
