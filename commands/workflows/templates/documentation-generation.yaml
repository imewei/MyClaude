workflow:
  name: "documentation-generation"
  description: "Complete documentation generation workflow"
  version: "1.0"
  author: "Claude Code Framework"
  tags: [documentation, api-docs, examples]

variables:
  target_path: "."
  doc_type: "all"
  format: "markdown"

steps:
  - id: analyze_code_structure
    command: explain-code
    description: "Analyze code structure for documentation"
    flags:
      - --level=expert
      - --docs
      - --format=${format}
    input: ${target_path}

  - id: parallel_doc_generation
    parallel: true
    depends_on: [analyze_code_structure]
    steps:
      - id: generate_api_docs
        command: update-docs
        description: "Generate API documentation"
        flags:
          - --type=api
          - --format=${format}
          - --optimize
        input: ${target_path}

      - id: generate_readme
        command: update-docs
        description: "Generate README documentation"
        flags:
          - --type=readme
          - --optimize
        input: ${target_path}

      - id: generate_research_docs
        command: update-docs
        description: "Generate research documentation"
        flags:
          - --type=research
          - --format=${format}
        input: ${target_path}

  - id: explain_complex_code
    command: explain-code
    description: "Generate detailed explanations for complex code"
    flags:
      - --level=expert
      - --docs
      - --interactive
      - --format=${format}
    input: ${target_path}
    depends_on: [parallel_doc_generation]

  - id: generate_examples
    command: explain-code
    description: "Generate usage examples"
    flags:
      - --level=basic
      - --format=markdown
    input: ${target_path}
    depends_on: [explain_complex_code]

  - id: update_changelog
    command: update-docs
    description: "Update changelog"
    flags:
      - --type=all
      - --optimize
    depends_on: [generate_examples]

  - id: verify_documentation
    command: check-code-quality
    description: "Verify documentation quality"
    flags:
      - --language=auto
      - --format=text
    input: ${target_path}
    depends_on: [update_changelog]

  - id: commit_documentation
    command: commit
    description: "Commit documentation updates"
    flags:
      - --all
      - --ai-message
      - --validate
    depends_on: [verify_documentation]